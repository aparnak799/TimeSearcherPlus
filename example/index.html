<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<s>
  <div id="target"></div>
  <div id="targetCoordinates"></div>
  <div id="targetDetailed"></div>
  <script src="https://d3js.org/d3.v7.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0/build/global/luxon.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>

  <script src="../dist/TimeSearcher.js"></script>

  <script >


    let target = TimeSearcher({
      target: d3.select("#target").node(), 
      detailedElement: d3.select("#targetDetailed").node(),
      brushCoordinatesElement: d3.select("#targetCoordinates").node(),
      xAttr: "Date",
      yAttr:  "Open",
      indexAttr: "stock",
      renderer: "canvas"
    })
    target.ts.updateCallback(selected => console.log(selected));
    target.ts.doubleYlegend = true;
    target.ts.stepY = 100;


    d3.csv("./sp500_20-22.csv",type).then(data => {
      target.ts.Data(data);
    });

      var fmt = d3.timeParse("%Y-%m-%d");
      function type(row) {
          row.Id = +row.Id
          row.Date =fmt(row.Date)
          row.Low = +row.Low;
          row.Open = +row.Open;
          row.Volume = +row.Volume;
          row.High = +row.High;
          row.Close = +row.Close;
          row["Adjusted Close"] = +row["Adjusted Close"];
          return row
      }

  </script>
</html>